{% extends 'base.html' %}
{% load static %}

{% block title %}FISHLAND - Premium Quality Fish{% endblock %}

{% block extra_css %}
<style>
    /* Modern styling */
    :root {
        --primary-color: #35e341;
        --secondary-color: #0c0707;
        --accent-color: #f8f9fa;
        --text-color: #2c3e50;
        --heading-font: 'Playfair Display', serif;
        --body-font: 'Poppins', sans-serif;
    }

    body {
        font-family: var(--body-font);
        color: var(--text-color);
    }

    /* Hero Section */
    .hero-section {
        height: 80vh;
        min-height: 600px;
        position: relative;
    }

    .carousel-item {
        height: 80vh;
        min-height: 600px;
        background-position: center;
        background-size: cover;
    }

    .carousel-caption {
        background: rgba(0, 0, 0, 0.5);
        border-radius: 20px;
        padding: 2rem;
        max-width: 800px;
        margin: 0 auto;
        bottom: 50%;
        transform: translateY(50%);
    }

    .carousel-caption h1 {
        font-family: var(--heading-font);
        font-size: 3.5rem;
        margin-bottom: 1rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    }

    .carousel-caption .btn-primary {
        background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        border: none;
        padding: 1rem 2rem;
        font-size: 1.1rem;
        border-radius: 50px;
        transition: all 0.3s ease;
    }

    .carousel-caption .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    /* Features Section */
    .features-section {
        background: var(--accent-color);
        padding: 5rem 0;
    }

    .feature-card {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        transition: all 0.3s ease;
        height: 100%;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }

    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }

    .feature-card i {
        color: var(--primary-color);
        font-size: 3rem;
        margin-bottom: 1.5rem;
    }

    .feature-card h4 {
        font-family: var(--heading-font);
        margin-bottom: 1rem;
        color: var(--secondary-color);
    }

    /* Categories Section */
    .categories-section {
        padding: 5rem 0;
    }

    .section-header h2 {
        font-family: var(--heading-font);
        color: var(--secondary-color);
        margin-bottom: 1rem;
    }

    .category-card {
        border-radius: 20px;
        overflow: hidden;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .category-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }

    .category-overlay {
        background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0.2));
        transition: all 0.3s ease;
    }

    .category-card:hover .category-overlay {
        background: linear-gradient(to top, rgba(53,227,65,0.8), rgba(12,7,7,0.4));
    }

    /* Featured Products */
    .featured-products {
        padding: 5rem 0;
    }

    .card {
        border: none;
        border-radius: 20px;
        overflow: hidden;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }

    .card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
    }

    .card-body {
        padding: 1.5rem;
    }

    .card-title {
        font-family: var(--heading-font);
        color: var(--secondary-color);
    }

    .btn-primary {
        background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        border: none;
        border-radius: 50px;
        padding: 0.8rem 1.5rem;
        transition: all 0.3s ease;
    }

    .btn-outline-primary {
        color: var(--secondary-color);
        border: 2px solid var(--primary-color);
        border-radius: 50px;
        padding: 0.8rem 1.5rem;
        transition: all 0.3s ease;
    }

    .btn-outline-primary:hover {
        background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
        border-color: transparent;
    }

    /* Why Choose Us */
    .why-choose-us {
        background: linear-gradient(45deg, rgba(53,227,65,0.1), rgba(12,7,7,0.05));
        padding: 5rem 0;
    }

    .why-choose-us h2 {
        font-family: var(--heading-font);
        color: var(--secondary-color);
    }

    .why-choose-us h5 {
        color: var(--secondary-color);
        margin-bottom: 1rem;
    }

    .why-choose-us i {
        color: var(--primary-color);
    }

    /* Testimonials */
    .testimonials {
        background: var(--accent-color);
        padding: 5rem 0;
    }

    .testimonial-card {
        background: white;
        border-radius: 20px;
        padding: 2rem;
        margin: 1rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    }

    .testimonial-card img {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        margin-bottom: 1rem;
    }

    /* Animations */
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fadeInUp {
        animation: fadeInUp 0.6s ease-out;
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section position-relative">
    <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="{% static 'images/slide 1.jpg' %}" class="d-block w-100" alt="Fresh Fish">
                <div class="carousel-caption">
                    <h1 class="display-4 fw-bold">Fresh Fish, Direct to You</h1>
                    <p class="lead">Premium quality seafood sourced directly from local fishermen</p>
                    <a href="{% url 'shop:products' %}" class="btn btn-primary btn-lg">
                        Shop Now <i class="fas fa-arrow-right ms-2"></i>
                    </a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="{% static 'images/silde2.jpg' %}" class="d-block w-100" alt="Quality Assurance">
                <div class="carousel-caption">
                    <h1 class="display-4 fw-bold">Quality Assured</h1>
                    <p class="lead">Every fish undergoes strict quality checks before delivery</p>
                    <a href="{% url 'shop:about' %}" class="btn btn-primary btn-lg">
                        Learn More <i class="fas fa-info-circle ms-2"></i>
                    </a>
                </div>
            </div>
            <div class="carousel-item">
                <img src="{% static 'images/slide3.jpg' %}" class="d-block w-100" alt="Fast Delivery">
                <div class="carousel-caption">
                    <h1 class="display-4 fw-bold">Same Day Delivery</h1>
                    <p class="lead">Order before 2 PM for same-day delivery</p>
                    <a href="{% url 'shop:delivery' %}" class="btn btn-primary btn-lg">
                        View Areas <i class="fas fa-map-marker-alt ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</section>

<!-- Features Section -->
<section class="features-section py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-md-3">
                <div class="feature-card text-center p-4">
                    <i class="fas fa-fish fa-3x text-primary mb-3"></i>
                    <h4>Fresh Catch</h4>
                    <p class="text-muted mb-0">Daily fresh fish from local fishermen</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="feature-card text-center p-4">
                    <i class="fas fa-truck fa-3x text-primary mb-3"></i>
                    <h4>Fast Delivery</h4>
                    <p class="text-muted mb-0">Same day delivery available</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="feature-card text-center p-4">
                    <i class="fas fa-shield-alt fa-3x text-primary mb-3"></i>
                    <h4>Quality Assured</h4>
                    <p class="text-muted mb-0">Strict quality control measures</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="feature-card text-center p-4">
                    <i class="fas fa-headset fa-3x text-primary mb-3"></i>
                    <h4>24/7 Support</h4>
                    <p class="text-muted mb-0">Always here to help you</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Popular Categories -->
<section class="categories-section py-5 bg-light">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h2 class="display-6 fw-bold">Popular Categories</h2>
            <p class="text-muted">Explore our wide range of fresh seafood</p>
        </div>
        <div class="row g-4">
            {% for category in popular_categories %}
            <div class="col-md-4">
                <a href="{% url 'shop:products' %}?category={{ category.slug }}" class="text-decoration-none">
                    <div class="category-card position-relative rounded overflow-hidden">
                        <img src="{{ category.image.url }}" alt="{{ category.name }}" 
                             class="w-100" style="height: 250px; object-fit: cover;">
                        <div class="category-overlay position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center">
                            <div class="text-center text-white">
                                <h3 class="mb-2">{{ category.name }}</h3>
                                <span class="badge bg-primary">{{ category.product_count }} Products</span>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Featured Products -->
<section class="featured-products py-5">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h2 class="display-6 fw-bold">Featured Products</h2>
            <p class="text-muted">Hand-picked premium quality seafood</p>
        </div>
        <div class="row g-4">
            {% for product in featured_products %}
            <div class="col-md-3">
                <div class="card h-100">
                    <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}"
                         style="height: 200px; object-fit: cover;">
                    {% if product.discount_percentage > 0 %}
                    <div class="position-absolute top-0 start-0 m-3">
                        <span class="badge bg-danger">-{{ product.discount_percentage }}%</span>
                    </div>
                    {% endif %}
                    <div class="card-body">
                        <h5 class="card-title mb-1">{{ product.name }}</h5>
                        <div class="mb-2">
                            <small class="text-muted">{{ product.category.name }}</small>
                        </div>
                        <div class="d-flex align-items-center mb-2">
                            {% for i in "12345"|make_list %}
                            <i class="fas fa-star{% if forloop.counter <= product.average_rating %} text-warning{% else %} text-muted{% endif %} small"></i>
                            {% endfor %}
                            <small class="ms-1 text-muted">({{ product.total_reviews }})</small>
                        </div>
                        <div class="mb-3">
                            {% if product.discount_price %}
                            <span class="h5 me-2">₹{{ product.discount_price }}</span>
                            <span class="text-muted text-decoration-line-through">₹{{ product.price }}</span>
                            {% else %}
                            <span class="h5">₹{{ product.price }}</span>
                            {% endif %}
                            <span class="text-muted">/kg</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <button class="btn btn-primary" onclick="addToCart('{{ product.id }}')">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                            <button class="btn btn-outline-primary" onclick="addToWishlist('{{ product.id }}')">
                                <i class="fas fa-heart"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="text-center mt-5">
            <a href="{% url 'shop:products' %}" class="btn btn-outline-primary btn-lg">
                View All Products <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
    </div>
</section>

<!-- Why Choose Us -->
<section class="why-choose-us py-5 bg-light">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-6">
                <h2 class="display-6 fw-bold mb-4">Why Choose FISHLAND?</h2>
                <div class="mb-4">
                    <h5><i class="fas fa-check-circle text-primary me-2"></i>Fresh from the Ocean</h5>
                    <p class="text-muted">We source our fish directly from local fishermen, ensuring maximum freshness.</p>
                </div>
                <div class="mb-4">
                    <h5><i class="fas fa-check-circle text-primary me-2"></i>Quality Guaranteed</h5>
                    <p class="text-muted">Every fish undergoes strict quality checks before being delivered to you.</p>
                </div>
                <div class="mb-4">
                    <h5><i class="fas fa-check-circle text-primary me-2"></i>Expert Handling</h5>
                    <p class="text-muted">Our team of experts ensures proper handling and packaging of your order.</p>
                </div>
                <div class="mb-4">
                    <h5><i class="fas fa-check-circle text-primary me-2"></i>Fast & Reliable Delivery</h5>
                    <p class="text-muted">We offer same-day delivery to ensure your fish arrives fresh at your doorstep.</p>
                </div>
            </div>
            <div class="col-lg-6">
                <img src="{% static 'images/why.jpg' %}" alt="Why Choose Us" 
                     class="img-fluid rounded">
            </div>
        </div>
    </div>
</section>

<!-- Testimonials -->
<section class="testimonials py-5">
    <div class="container">
        <div class="section-header text-center mb-5">
            <h2 class="display-6 fw-bold">What Our Customers Say</h2>
            <p class="text-muted">Don't just take our word for it</p>
        </div>
        <div class="row g-4">
            {% for testimonial in testimonials %}
            <div class="col-md-4">
                <div class="testimonial-card p-4 rounded">
                    <div class="d-flex align-items-center mb-3">
                        {% if testimonial.user.profile_image %}
                        <img src="{{ testimonial.user.profile_image.url }}" 
                             class="rounded-circle me-3" alt="Profile"
                             style="width: 60px; height: 60px; object-fit: cover;">
                        {% else %}
                        <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-3"
                             style="width: 60px; height: 60px;">
                            <i class="fas fa-user fa-2x"></i>
                        </div>
                        {% endif %}
                        <div>
                            <h5 class="mb-1">{{ testimonial.user.company_name }}</h5>
                            <div>
                                {% for i in "12345"|make_list %}
                                <i class="fas fa-star{% if forloop.counter <= testimonial.rating %} text-warning{% else %} text-muted{% endif %}"></i>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                    <p class="mb-0">{{ testimonial.content }}</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Call to Action -->
<section class="cta py-5 bg-primary text-white">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-8 text-center text-lg-start">
                <h2 class="display-6 fw-bold mb-3">Ready to Get Started?</h2>
                <p class="lead mb-0">Join FISHLAND today and experience the freshest seafood delivery service.</p>
            </div>
            <div class="col-lg-4 text-center text-lg-end mt-4 mt-lg-0">
                <a href="{% url 'account_signup' %}" class="btn btn-light btn-lg">
                    Register Now <i class="fas fa-arrow-right ms-2"></i>
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Add animation classes on scroll
    document.addEventListener('DOMContentLoaded', function() {
        const elements = document.querySelectorAll('.feature-card, .category-card, .card, .testimonial-card');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-fadeInUp');
                }
            });
        }, {
            threshold: 0.1
        });

        elements.forEach(element => {
            observer.observe(element);
        });
    });

    // Existing JavaScript functions
    function addToCart(productId) {
        makeRequest('/api/cart/add/', 'POST', {
            product_id: productId,
            quantity: 1
        }).then(response => {
            showToast('Product added to cart');
            updateCartCount();
        });
    }

    function addToWishlist(productId) {
        makeRequest('/api/wishlist/add/', 'POST', {
            product_id: productId
        }).then(response => {
            showToast('Product added to wishlist');
        });
    }
</script>
{% endblock %}
